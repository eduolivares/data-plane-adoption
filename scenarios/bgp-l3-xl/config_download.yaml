resource_registry:
  # yamllint disable rule:line-length
  OS::TripleO::DeployedServer::ControlPlanePort: /usr/share/openstack-tripleo-heat-templates/deployed-server/deployed-neutron-port.yaml
  OS::TripleO::OVNMacAddressNetwork: OS::Heat::None
  OS::TripleO::OVNMacAddressPort: OS::Heat::None

  OS::TripleO::ComputeRack0::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ComputeRack0::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ComputeRack0::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::ComputeRack1::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ComputeRack1::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ComputeRack1::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::ComputeRack2::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ComputeRack2::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ComputeRack2::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::ControllerRack0::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ControllerRack0::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ControllerRack0::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::ControllerRack1::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ControllerRack1::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ControllerRack1::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::ControllerRack2::Ports::LeftNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_left_network.yaml
  OS::TripleO::ControllerRack2::Ports::RightNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_right_network.yaml
  OS::TripleO::ControllerRack2::Ports::MainNetworkPort: /usr/share/openstack-tripleo-heat-templates/network/ports/deployed_main_network.yaml

  OS::TripleO::Services::OsloMessagingRpc: /usr/share/openstack-tripleo-heat-templates/deployment/rabbitmq/rabbitmq-messaging-rpc-pacemaker-puppet.yaml
  OS::TripleO::Services::OsloMessagingNotify: /usr/share/openstack-tripleo-heat-templates/deployment/rabbitmq/rabbitmq-messaging-notify-shared-puppet.yaml
  OS::TripleO::Services::HAproxy: /usr/share/openstack-tripleo-heat-templates/deployment/haproxy/haproxy-pacemaker-puppet.yaml
  OS::TripleO::Services::Pacemaker: /usr/share/openstack-tripleo-heat-templates/deployment/pacemaker/pacemaker-baremetal-puppet.yaml
  OS::TripleO::Services::PacemakerRemote: /usr/share/openstack-tripleo-heat-templates/deployment/pacemaker/pacemaker-remote-baremetal-puppet.yaml
  OS::TripleO::Services::Clustercheck: /usr/share/openstack-tripleo-heat-templates/deployment/pacemaker/clustercheck-container-puppet.yaml
  OS::TripleO::Services::Redis: /usr/share/openstack-tripleo-heat-templates/deployment/database/redis-pacemaker-puppet.yaml
  OS::TripleO::Services::Rsyslog: /usr/share/openstack-tripleo-heat-templates/deployment/logging/rsyslog-container-puppet.yaml
  OS::TripleO::Services::MySQL: /usr/share/openstack-tripleo-heat-templates/deployment/database/mysql-pacemaker-puppet.yaml
  OS::TripleO::Services::CinderBackup: /usr/share/openstack-tripleo-heat-templates/deployment/cinder/cinder-backup-pacemaker-puppet.yaml
  OS::TripleO::Services::CinderVolume: /usr/share/openstack-tripleo-heat-templates/deployment/cinder/cinder-volume-pacemaker-puppet.yaml
  OS::TripleO::Services::HeatApi: /usr/share/openstack-tripleo-heat-templates/deployment/heat/heat-api-container-puppet.yaml
  OS::TripleO::Services::HeatApiCfn: /usr/share/openstack-tripleo-heat-templates/deployment/heat/heat-api-cfn-container-puppet.yaml
  OS::TripleO::Services::HeatApiCloudwatch: /usr/share/openstack-tripleo-heat-templates/deployment/heat/heat-api-cloudwatch-disabled-puppet.yaml
  OS::TripleO::Services::HeatEngine: /usr/share/openstack-tripleo-heat-templates/deployment/heat/heat-engine-container-puppet.yaml

  # workarounds
  OS::TripleO::ControllerRack0ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml
  OS::TripleO::ControllerRack1ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml
  OS::TripleO::ControllerRack2ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml
  OS::TripleO::ComputeRack0ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml
  OS::TripleO::ComputeRack1ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml
  OS::TripleO::ComputeRack2ExtraConfigPre: /home/stack/tht/extraconfigpre_template.yaml

  OS::TripleO::NodeExtraConfigPost: /home/stack/tht/extraconfigpost_template.yaml

parameter_defaults:
  OvercloudControllerRack0Flavor: control0
  OvercloudControllerRack1Flavor: control1
  OvercloudControllerRack2Flavor: control2
  ControllerRack0Count: 1
  ControllerRack1Count: 1
  ControllerRack2Count: 1
  OvercloudComputeRack0Flavor: compute0
  OvercloudComputeRack1Flavor: compute1
  OvercloudComputeRack2Flavor: compute2
  ComputeRack0Count: 2
  ComputeRack1Count: 2
  ComputeRack2Count: 2
  ControllerRack0ControlPlaneSubnet: r0
  ControllerRack1ControlPlaneSubnet: r1
  ControllerRack2ControlPlaneSubnet: r2
  ComputeRack0ControlPlaneSubnet: r0
  ComputeRack1ControlPlaneSubnet: r1
  ComputeRack2ControlPlaneSubnet: r2

  # extraconfigpre
  ContainerHealthcheckDisabled: true
  Debug: true
  ConfigDebug: true
  CephAnsiblePlaybookVerbosity: 2
  CloudDomain: "{{ ansible_domain }}"
  CloudName: "overcloud.{{ ansible_domain }}"
  CloudNameCtlplane: "overcloud.ctlplane.{{ ansible_domain }}"
  CloudNameMainNetwork: "overcloud.main.{{ ansible_domain }}"
  CloudNameLeftNetwork: "overcloud.left.{{ ansible_domain }}"
  CloudNameRightNetwork: "overcloud.right.{{ ansible_domain }}"

  # Issue 84. in the rhel9 issue doc (vms do not boot)
  IronicDefaultBootMode: 'bios'

  SkipRhelEnforcement: 'true'
  TimeZone: UTC
  CinderLVMLoopDeviceSize: 16384
  FrrBfdEnabled: true
  FrrBgpEnabled: true
  FrrBgpIpv4AllowASIn: true
  FrrBgpIpv6AllowASIn: true
  FrrBgpUplinks: ['nic2', 'nic3']
  FrrBgpUplinksScope: internal
  FrrLogLevel: debugging
  FrrBgpIpv4SrcNetwork: main_network
  FrrBgpIpv6SrcNetwork: main_network_ipv6
  FrrBgpL2VpnEnabled: true
  FrrBgpL2VpnEbgpMultihop: 10
  FrrBgpL2VpnPeers: ['5.1.1.1']

  ControllerRack0ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups
  ControllerRack1ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups
  ControllerRack2ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups
  ComputeRack0ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups
  ComputeRack1ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups
  ComputeRack2ExtraGroupVars:
    tripleo_frr_bgp_neighbor_password: f00barZ
    tripleo_frr_bfd_detect_multiplier: 10
    tripleo_frr_bfd_transmit_interval: 500
    tripleo_frr_bfd_receive_interval: 500
    tripleo_frr_zebra_graceful_restart_time: 30
    tripleo_frr_conf_custom_router_bgp: |
      bgp graceful-restart
    tripleo_frr_conf_custom_globals: |
      debug bfd peer
      debug bfd network
      debug bfd zebra
      debug bgp graceful-restart
      debug bgp neighbor-events
      debug bgp updates
      debug bgp update-groups

  BgpvpnServiceProvider: 'BGPVPN:OVN:networking_bgpvpn.neutron.services.service_drivers.ovn.ovn.OvnBGPVPNDriver:default'

  ControllerRack0SchedulerHints:
    'capabilities:node': 'osp-r0-controller-%index%'
  ControllerRack1SchedulerHints:
    'capabilities:node': 'osp-r1-controller-%index%'
  ControllerRack2SchedulerHints:
    'capabilities:node': 'osp-r2-controller-%index%'
  ComputeRack0SchedulerHints:
    'capabilities:node': 'osp-r0-compute-%index%'
  ComputeRack1SchedulerHints:
    'capabilities:node': 'osp-r1-compute-%index%'
  ComputeRack2SchedulerHints:
    'capabilities:node': 'osp-r2-compute-%index%'

  ExtraConfig:
    neutron::config::plugin_ml2_config:
      OVN/ovsdb_log_level:
        value: DEBUG

  # Allow ssh access from all networks
  SshFirewallAllowAll: true
  MemcachedIpSubnet: '172.16.0.0/12'

  BarbicanSimpleCryptoGlobalDefault: true


  ### network-environment content
  ControllerRack0IPs:
    left_network:
    - 100.64.0.30
    right_network:
    - 100.65.0.30
    main_network:
    - 99.99.0.29/24
  ControllerRack1IPs:
    left_network:
    - 100.64.1.30
    right_network:
    - 100.65.1.30
    main_network:
    - 99.99.1.30/24
  ControllerRack2IPs:
    left_network:
    - 100.64.2.30
    right_network:
    - 100.65.2.30
    main_network:
    - 99.99.2.29/24
  ComputeRack0IPs:
    left_network:
    - 100.64.0.2
    - 100.64.0.6
    right_network:
    - 100.65.0.2
    - 100.65.0.6
    main_network:
    - 99.99.0.2/24
    - 99.99.0.6/24
  ComputeRack1IPs:
    left_network:
    - 100.64.1.2
    - 100.64.1.6
    right_network:
    - 100.65.1.2
    - 100.65.1.6
    main_network:
    - 99.99.1.2/24
    - 99.99.1.6/24
  ComputeRack2IPs:
    left_network:
    - 100.64.2.2
    - 100.64.2.6
    right_network:
    - 100.65.2.2
    - 100.65.2.6
    main_network:
    - 99.99.2.2/24
    - 99.99.2.6/24


  # this overrides the default value openstacklocal
  NeutronDnsDomain: example.com

  # overriding default values in order to not collide with provider subnet
  OctaviaControlSubnetCidr: 172.25.0.0/16
  OctaviaControlSubnetGateway: 172.25.0.1
  OctaviaControlSubnetPoolStart: 172.25.0.2
  OctaviaControlSubnetPoolEnd: 172.25.255.254

  OctaviaLoadBalancerTopology: ACTIVE_STANDBY

  ControlPlaneSubnet: main_network_r0
  VipSubnetMap:
    main_network: main_network_r0
  # provider1 represents a flat network
  # provider2 represents a network with vlans
  NeutronFlatNetworks: provider1
  ControllerRack0Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    ControlPlaneSubnet: main_network_r0
    OVNCMSOptions: "enable-chassis-as-gw"
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    FrrOvnBgpAgentExposeTenantNetworks: True
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  ControllerRack1Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    ControlPlaneSubnet: main_network_r1
    OVNCMSOptions: "enable-chassis-as-gw"
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    FrrOvnBgpAgentExposeTenantNetworks: True
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  ControllerRack2Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    ControlPlaneSubnet: main_network_r2
    OVNCMSOptions: "enable-chassis-as-gw"
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    FrrOvnBgpAgentExposeTenantNetworks: True
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  ComputeRack0Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  ComputeRack1Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  ComputeRack2Parameters:
    NeutronBridgeMappings: ["provider1:br-ex", "provider2:br-vlan"]
    FrrOvnBgpAgentDriver: 'ovn_bgp_driver'
    ExtraSysctlSettings:
      net.ipv6.conf.enp2s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.enp3s0.accept_ra_defrtr:
        value: 0
      net.ipv6.conf.br-ex.router_solicitations:
        value: 0
  #NeutronEnableDVR: 'false'
  #NeutronNetworkType: 'geneve'
  #NeutronTunnelTypes: 'geneve'
  NeutronExternalNetworkBridge: ''
  NeutronNetworkVLANRanges: 'provider2:1:1000'
  DnsServers: ['192.168.122.1', '192.168.125.1']
  NtpPool: clock.corp.redhat.com
  EnableVLANTransparency: True
  NeutronEnableIgmpSnooping: True

  RedisVirtualFixedIPs:
    - ip_address: 172.31.0.3
      use_neutron: false

  ServiceNetMap:
    ApacheNetwork: main_network
    NeutronTenantNetwork: main_network
    AodhApiNetwork: main_network
    PankoApiNetwork: main_network
    BarbicanApiNetwork: main_network
    GnocchiApiNetwork: main_network
    MongodbNetwork: main_network
    CinderApiNetwork: main_network
    CinderIscsiNetwork: main_network
    GlanceApiNetwork: main_network
    GlanceApiEdgeNetwork: main_network
    GlanceApiInternalNetwork: main_network
    IronicApiNetwork: main_network
    IronicNetwork: main_network
    IronicInspectorNetwork: main_network
    KeystoneAdminApiNetwork: main_network
    KeystonePublicApiNetwork: main_network
    ManilaApiNetwork: main_network
    NeutronApiNetwork: main_network
    OctaviaApiNetwork: main_network
    HeatApiNetwork: main_network
    HeatApiCfnNetwork: main_network
    HeatApiCloudwatchNetwork: main_network
    NovaApiNetwork: main_network
    PlacementNetwork: main_network
    NovaMetadataNetwork: main_network
    NovaVncProxyNetwork: main_network
    NovaLibvirtNetwork: main_network
    NovajoinNetwork: main_network
    SwiftStorageNetwork: main_network
    SwiftProxyNetwork: main_network
    HorizonNetwork: main_network
    MemcachedNetwork: main_network
    OsloMessagingRpcNetwork: main_network
    OsloMessagingNotifyNetwork: main_network
    RabbitmqNetwork: main_network
    QdrNetwork: main_network
    RedisNetwork: main_network
    GaneshaNetwork: main_network
    MysqlNetwork: main_network
    SnmpdNetwork: main_network
    CephClusterNetwork: main_network
    CephDashboardNetwork: main_network
    CephGrafanaNetwork: main_network
    CephMonNetwork: main_network
    CephRgwNetwork: main_network
    PublicNetwork: main_network
    OpendaylightApiNetwork: main_network
    OvnDbsNetwork: main_network
    DockerRegistryNetwork: ctlplane
    PacemakerNetwork: main_network
    PacemakerRemoteNetwork: main_network
    DesignateApiNetwork: main_network
    BINDNetwork: main_network
    EtcdNetwork: main_network
    HaproxyNetwork: main_network

    # Not sure as to why yet, but without these we fail rendering the hosts entries
    ControllerRack1HostnameResolveNetwork: main_network
    ControllerRack2HostnameResolveNetwork: main_network
    ControllerRack3HostnameResolveNetwork: main_network
    ComputeRack1HostnameResolveNetwork: main_network
    ComputeRack2HostnameResolveNetwork: main_network
    ComputeRack3HostnameResolveNetwork: main_network
    InternalApiNetwork: main_network

    PublicNetwork: external
    #PublicNetwork: ctlplane
